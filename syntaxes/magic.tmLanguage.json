{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "magic",
	"scopeName": "source.magic",
	"patterns": [
		{
			"name": "comment.magic",
			"match": "#.*$"
		},
		{

			"match": "^(!:(mime|apple|ext|strength))\\s+(\\S+)$",
			"captures": {
				"1": {"patterns": [{
					"name": "keyword.control.magic",
					"match": "."
				}]},
				"3": {"patterns": [{
					"name": "string.unquoted.magic",
					"match": "."
				}]}
			}
		},
		{
			"match": "^(\\S+)\\s*(\\S+|)\\s*(\\S+|)\\s*(.+|)$",
			"captures": {
				"1": {"patterns": [{"include": "#offsets"}]},
				"2": {"patterns": [{"include": "#types"}]},
				"3": {"patterns": [{"include": "#tests"}]},
				"4": {"patterns": [{"include": "#messages"}]}
			}
		}
	],
	"repository": {
		"offsets": {
			"patterns": [{
				"match": "(\\>+|)(\\&|)(.+)",
				"captures": {
					"1": {"patterns": [{"name": "keyword.operator.magic", "match": "."}]},
					"2": {"patterns": [{"name": "keyword.operator.magic", "match": "."}]},
					"3": {"patterns": [{"name": "constant.numeric.magic", "match": "."}]}
				}
			}]
		},
		"types": {
			"patterns": [{
				"match": "((u|)(byte|short|long|quad|float|double|string|pstring|date|qdate|ldate|qldate|qwdate|beid3|beshort|belong|bequad|befloat|bedouble|bedate|beqdate|beqdate|beqldate|beqwdate|bestring16|leid3|leshort|lelong|lequad|lefloat|ledouble|ledate|leqdate|leldate|leqldate|leqwdate|lestring16|melong|medate|meldate|indirect|name|use|regex|search|default|clear|der|guid|offset))((.)(.+)|)",
				"captures": {
					"1": {"patterns": [{"name": "storage.type.magic", "match": "."}]},
					"5": {"patterns": [{"name": "keyword.operator.magic", "match": "."}]},
					"6": {"patterns": [{"name": "constant.numeric.magic", "match": "."}]}
				}
			}]
		},
		"tests": {
			"patterns": [
				{ "name": "entity.name.tag", "match": "x" },
				{
					"match": "([=|\\!|<|>|\\&|\\^]+|)((0b[0-1|\\.]+|0o[0-7|\\.]+|0d[0-9|\\.]+|0x[0-9a-fA-F|\\.]+)|[\\d|\\.]+|)([^\\d]+|)",
					"captures": {
						"1": {"patterns": [{"name": "keyword.operator.magic", "match": "."}]},
						"2": {"patterns": [{"name": "constant.numeric.magic", "match": "."}]},
						"4": {"patterns": [{ "name": "string.unquoted.magic", "match": "." }]}
					}
				}
			]
		},
		"messages": {
			"patterns": [
				{ "name": "variable.parameter.magic", "match": "%(#|\\+|\\-|\\s|)*(0[0-9]|)(((hh|h|l|ll|q|L|j|z|Z|t|)(d|i|o|u|x|X))|e|E|f|F|g|G|a|A|c|s|C|S|p|n|m|%)" },
				{ "name": "constant.character.escape.magic", "match": "\\\\." },
				{ "name": "string.unquoted.magic", "match": "." }
			]
		}
	}
}
